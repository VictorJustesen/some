{"ast":null,"code":"var _jsxFileName = \"/Users/victor/Desktop/Code/Projects/some/someui/src/components/share/Share.jsx\",\n  _s = $RefreshSig$();\nimport \"./share.scss\";\nimport AddPhotoAlternateIcon from \"@mui/icons-material/AddPhotoAlternate\";\nimport MapIcon from \"@mui/icons-material/Map\";\nimport PersonAddIcon from \"@mui/icons-material/PersonAdd\";\nimport { useContext, useState } from \"react\";\nimport { AuthContext } from \"../../context/authContext\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { makeRequest } from \"../../axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Share = () => {\n  _s();\n  const [file, setFile] = useState(null);\n  const [desc, setDesc] = useState(\"\");\n  const upload = async () => {\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      const res = await makeRequest.post(\"/upload\", formData);\n      return res.data;\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const queryClient = useQueryClient();\n  const mutation = useMutation(newPost => {\n    return makeRequest.post(\"/posts\", newPost);\n  }, {\n    onSuccess: () => {\n      // Invalidate and refetch\n      queryClient.invalidateQueries([\"posts\"]);\n    }\n  });\n  const handleClick = async e => {\n    e.preventDefault();\n    let imgUrl = \"\";\n    if (file) imgUrl = await upload();\n    mutation.mutate({\n      desc,\n      img: imgUrl\n    });\n    setDesc(\"\");\n    setFile(null);\n  };\n  function autoResize(textarea) {\n    textarea.style.height = \"auto\";\n    textarea.style.height = textarea.scrollHeight + \"px\";\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"share\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"top\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"left\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/upload/\" + currentUser.profilepic,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            placeholder: `What's on your mind ${currentUser.name}?`,\n            rows: \"1\",\n            onChange: e => {\n              setDesc(e.target.value);\n              autoResize(e.target);\n            },\n            value: desc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"right\",\n          children: file && /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"file\",\n            alt: \"\",\n            src: URL.createObjectURL(file)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bottom\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"file\",\n          style: {\n            display: \"none\"\n          },\n          onChange: e => setFile(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"file\",\n            children: /*#__PURE__*/_jsxDEV(PersonAddIcon, {\n              st: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Add Image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item\",\n          children: [/*#__PURE__*/_jsxDEV(MapIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Add Place\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item\",\n          children: [/*#__PURE__*/_jsxDEV(AddPhotoAlternateIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Tag Friends\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleClick,\n          children: \"Share\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(Share, \"Gh4r23ODUSNiUTtGhChm6cYFxxQ=\", false, function () {\n  return [useQueryClient, useMutation];\n});\n_c = Share;\nexport default Share;\nvar _c;\n$RefreshReg$(_c, \"Share\");","map":{"version":3,"names":["AddPhotoAlternateIcon","MapIcon","PersonAddIcon","useContext","useState","AuthContext","useMutation","useQueryClient","makeRequest","jsxDEV","_jsxDEV","Share","_s","file","setFile","desc","setDesc","upload","formData","FormData","append","res","post","data","err","console","log","currentUser","queryClient","mutation","newPost","onSuccess","invalidateQueries","handleClick","e","preventDefault","imgUrl","mutate","img","autoResize","textarea","style","height","scrollHeight","className","children","src","profilepic","alt","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","name","rows","onChange","target","value","URL","createObjectURL","type","id","display","files","htmlFor","st","onClick","_c","$RefreshReg$"],"sources":["/Users/victor/Desktop/Code/Projects/some/someui/src/components/share/Share.jsx"],"sourcesContent":["import \"./share.scss\";\nimport AddPhotoAlternateIcon from \"@mui/icons-material/AddPhotoAlternate\";\nimport MapIcon from \"@mui/icons-material/Map\";\nimport PersonAddIcon from \"@mui/icons-material/PersonAdd\";\nimport { useContext, useState } from \"react\";\nimport { AuthContext } from \"../../context/authContext\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { makeRequest } from \"../../axios\";\nconst Share = () => {\n  const [file, setFile] = useState(null);\n  const [desc, setDesc] = useState(\"\");\n\n  const upload = async () => {\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      const res = await makeRequest.post(\"/upload\", formData);\n      return res.data;\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const { currentUser } = useContext(AuthContext);\n\n  const queryClient = useQueryClient();\n\n  const mutation = useMutation(\n    (newPost) => {\n      return makeRequest.post(\"/posts\", newPost);\n    },\n    {\n      onSuccess: () => {\n        // Invalidate and refetch\n        queryClient.invalidateQueries([\"posts\"]);\n      },\n    }\n  );\n\n \n  \n  const handleClick = async (e) => {\n    e.preventDefault();\n    let imgUrl = \"\";\n    if (file) imgUrl = await upload();\n    mutation.mutate({ desc, img: imgUrl });\n    setDesc(\"\");\n    setFile(null);\n  };\n\n  function autoResize(textarea) {\n    textarea.style.height = \"auto\";\n    textarea.style.height = (textarea.scrollHeight) + \"px\";\n  }\n  return (\n    <div className=\"share\">\n      <div className=\"container\">\n        <div className=\"top\">\n          <div className=\"left\">\n            <img src={\"/upload/\" + currentUser.profilepic} alt=\"\" />\n            <textarea\n  placeholder={`What's on your mind ${currentUser.name}?`}\n  rows=\"1\"\n  onChange={(e) => {\n    setDesc(e.target.value);\n    autoResize(e.target);\n  }}\n  value={desc}\n></textarea>\n\n          </div>\n          <div className=\"right\">\n            {file && (\n              <img className=\"file\" alt=\"\" src={URL.createObjectURL(file)} />\n            )}\n          </div>\n        </div>\n        \n        <div className=\"bottom\">\n          \n            <input\n              type=\"file\"\n              id=\"file\"\n              style={{ display: \"none\" }}\n              onChange={(e) => setFile(e.target.files[0])}\n            />\n            \n              <div className=\"item\">\n              <label htmlFor=\"file\">\n                <PersonAddIcon st/>\n                </label>\n                <span>Add Image</span>\n              </div>\n           \n            <div className=\"item\">\n              <MapIcon/>\n              <span>Add Place</span>\n            </div>\n            <div className=\"item\">\n              <AddPhotoAlternateIcon/>\n              <span>Tag Friends</span>\n            </div>\n            <button onClick={handleClick}>Share</button>\n          </div>\n         \n            \n         \n      </div>\n    </div>\n  );\n};\n\nexport default Share;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}